<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>Error Injection</title><link rel="Prev" href="04_verification_features.08.5.html" title="Previous" /><link rel="Next" href="04_verification_features.08.7.html" title="Next" /><link rel="StyleSheet" href="css/04_verification_features.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/04_verification_features_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../index.html#page/axi_svt_uvm_user_guide/04_verification_features.08.6.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');

            // escape the '#' character
            //
            redirect_url += '%23' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script><noscript><div id="noscript_padding"></div></noscript></head><body id="pjYAPODTk6l2QiWKMmyUoNQ" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/axi_svt_uvm_user_guide/04_verification_features.08.6.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><a class="WebWorks_Breadcrumb_Link" href="01_Intro.01.1.html">AXI UVM User Guide</a> : <a class="WebWorks_Breadcrumb_Link" href="04_verification_features.08.1.html#1125192"> Verification Features</a> : Error Injection</div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a><a class="ww_behavior_email ww_skin ww_skin_email" title="E-Mail" href="#" target="external_window">&nbsp;</a></div></header><div id="ww1125192" class="H2">Error Injection</div><div id="ww1127002" class="Body"><span></span>AXI SVT VIP supports implementation of predefined errors that can be injected during the execution of a transaction. This is achieved through AXI SVT exception class <span class="Code">svt_axi_transaction_exception</span> and exception list class <span class="Code">svt_axi_transaction_exception_list</span>. The following sections describe these classes in detail.</div><div id="ww1127031" class="H3">Exception Class</div><div id="ww1127058" class="Body"><span></span>The Exception class for the AXI transaction class is<span class="Code"> svt_axi_transaction_exception</span>. It extends from the <span class="Code">svt_exception</span> class. A randomizable error_kind property of type<span class="Code"> error_kind_enum</span> exists in this class. This property defines the type of error to be injected.</div><div id="ww1127059" class="Code">/** Selects the type of error that will be injected. */</div><div id="ww1127060" class="Code">rand error_kind_enum error_kind = COHERENT_XACT_BYTES_LESS_THAN_CACHE_LINE_SIZE_ERROR;</div><div id="ww1127062" class="Body"><span></span>For a list of supported error kinds, refer to the <span class="Code">svt_axi_transaction_exception::error_kind</span> member in the AXI Class Reference HTML. </div><div id="ww1127054" class="H3">Exception Lists</div><div id="ww1127117" class="Body"><span></span>The Exception list for the AXI transaction is<span class="Code"> svt_axi_transaction_exception_list</span>. It basically contains a queue of <span class="Code">svt_axi_transaction_exception</span> objects. An instance of the exception list class describes all of the exceptions applicable to an individual transaction. Therefore, a transaction descriptor should have a reference to an exception list.</div><div id="ww1127118" class="Body"><span></span>For more details on the <span class="Code">svt_axi_transaction_exception_list</span> class, see the AXI Class Reference HTML.</div><div id="ww1127113" class="H3">Use Model</div><div id="ww1127154" class="Body"><span></span>VIP provides the <span class="Code">svt_axi_master_callback</span> class. It contains all the callback methods called by the master component. You can implement an error injection callback class by extending from <span class="Code">svt_axi_master_callback </span>class. It is recommended that the exceptions are added in the <span class="Code">post_input_port_get </span>callback to ensure that all exceptions are added before the transaction is processed and driven on the interface.</div><div id="ww1127156" class="Body"><span></span>The following is an example of error injection callback class that extends from the <span class="Code">svt_axi_master_callback</span> class. </div><div id="ww1127157" class="Body"><span></span>The following is the code snippet for the UVM flow:</div><div id="ww1127159" class="Code">/**</div><div id="ww1127160" class="Code">   * This class extends from svt_axi_master_callback class. </div><div id="ww1127161" class="Code">   * It shows how user can inject pre-defined errors during the execution of a transaction</div><div id="ww1127162" class="Code">  * through various callback methods. In this class post_input_port_get() callback is</div><div id="ww1127163" class="Code">  *  overridden and specific errors are injected.</div><div id="ww1127164" class="Code">   */</div><div id="ww1127165" class="Code">class cust_svt_axi_master_error_injection_callback extends svt_axi_master_callback;</div><div id="ww1127166" class="Code">&nbsp;</div><div id="ww1127167" class="Code">   //  Instance of svt_axi_transaction_exception class</div><div id="ww1127168" class="Code">  svt_axi_transaction_exception my_exception;</div><div id="ww1127169" class="Code">  // Instance of svt_axi_transaction_exception_list class</div><div id="ww1127170" class="Code">  svt_axi_transaction_exception_list my_exception_list;</div><div id="ww1127171" class="Code">// Flag for checking randomization success or failure</div><div id="ww1127172" class="Code"> int result = 0;</div><div id="ww1127173" class="Code">&nbsp;</div><div id="ww1127174" class="Code">  /**</div><div id="ww1127175" class="Code">   * Constructor of the class. </div><div id="ww1127176" class="Code">  */</div><div id="ww1127177" class="Code">  function new ( string name = "cust_svt_axi_system_interconnect_error_injection_callback");</div><div id="ww1127178" class="Code">    super.new(name);</div><div id="ww1127179" class="Code">  endfunction</div><div id="ww1127180" class="Code">&nbsp;</div><div id="ww1127181" class="Code">/**</div><div id="ww1127182" class="Code"> * Overrides post_input_port_callback() method to inject errors through the</div><div id="ww1127183" class="Code">* use of SVT AXI exception classes.</div><div id="ww1127184" class="Code"> */</div><div id="ww1127185" class="Code"> virtual function void post_input_port_get(svt_axi_master axi_master, svt_axi_transaction xact, ref bit drop);</div><div id="ww1127186" class="Code">   super.post_input_port_get(axi_master,xact,drop);</div><div id="ww1127187" class="Code">&nbsp;</div><div id="ww1127188" class="Code"> // Construct svt_axi_transaction_exception and svt_axi_transaction_exception_list class</div><div id="ww1127189" class="Code">  my_exception = svt_axi_transaction_exception::type_id::create("master_exception");</div><div id="ww1127190" class="Code">  my_exception_list = svt_axi_transaction_exception_list::type_id::create("master_exception_list");</div><div id="ww1127191" class="Code"> </div><div id="ww1127192" class="Code">  // Assign xact and cfg handle of svt_axi_transaction_exception class before randomization</div><div id="ww1127193" class="Code">  my_exception.xact = xact;</div><div id="ww1127194" class="Code">  my_exception.cfg = xact.port_cfg;</div><div id="ww1127195" class="Code">&nbsp;</div><div id="ww1127196" class="Code">  // Randomize exception class based on error_kind to be injected</div><div id="ww1127197" class="Code">  result = my_exception.randomize() with {error_kind ==     svt_axi_transaction_exception::INVALID_BURST_TYPE_FOR_COHERENT_XACT_ERROR;};</div><div id="ww1127198" class="Code">&nbsp;</div><div id="ww1127199" class="Code"> if (!result) begin</div><div id="ww1127200" class="Code">   `svt_error("post_input_port_get", $sformatf("Randomization FAILED for svt_axi_transaction_exception class for error_kind = %0s",my_exception.error_kind.name()));</div><div id="ww1127201" class="Code"> end</div><div id="ww1127202" class="Code">&nbsp;</div><div id="ww1127203" class="Code">/**</div><div id="ww1127204" class="Code">    * Add a new exception with the specified content to the exception list.</div><div id="ww1127205" class="Code">    */              </div><div id="ww1127206" class="Code">my_exception_list.add_exception(my_exception);</div><div id="ww1127207" class="Code">&nbsp;</div><div id="ww1127208" class="Code">&nbsp;</div><div id="ww1127209" class="Code"> // Initialize svt_axi_transaction_exception_list handle (svt_axi_transaction::exception_list) with the user-defined</div><div id="ww1127210" class="Code"> // exception list. This way the error_kind of type</div><div id="ww1127211" class="Code">//   svt_axi_transaction_exception::INVALID_BURST_TYPE_FOR_COHERENT_XACT_ERROR</div><div id="ww1127212" class="Code"> // gets injected in this particular transaction.</div><div id="ww1127213" class="Code"> xact.exception_list = my_exception_list;</div><div id="ww1127214" class="Code"> endfunction //end of function post_input_port_get()</div><div id="ww1127215" class="Code">endclass //end of class cust_svt_axi_master_error_injection_callback</div><noscript><div id="noscript_warning">This site works best with JavaScript enabled</div></noscript><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br /></footer><input type="hidden" id="preserve_unknown_file_links" value="false"></input></body></html>