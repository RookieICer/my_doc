<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>Why the User Needs to Disable Auto Item Recording</title><link rel="Prev" href="06_using_AXI_VIP.10.08.html" title="Previous" /><link rel="Next" href="06_using_AXI_VIP.10.10.html" title="Next" /><link rel="StyleSheet" href="css/06_using_AXI_VIP.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/06_using_AXI_VIP_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../index.html#page/axi_svt_uvm_user_guide/06_using_AXI_VIP.10.09.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');

            // escape the '#' character
            //
            redirect_url += '%23' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script><noscript><div id="noscript_padding"></div></noscript></head><body id="paV40FVk6d17cL_002bCFtA6y_002bw" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/axi_svt_uvm_user_guide/06_using_AXI_VIP.10.09.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><a class="WebWorks_Breadcrumb_Link" href="01_Intro.01.1.html">AXI UVM User Guide</a> : <a class="WebWorks_Breadcrumb_Link" href="06_using_AXI_VIP.10.01.html#1108591"> Using AXI Verification IP</a> : Why the User Needs to Disable Auto Item Recording</div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a><a class="ww_behavior_email ww_skin ww_skin_email" title="E-Mail" href="#" target="external_window">&nbsp;</a></div></header><div id="ww1108591" class="H2">Why the User Needs to Disable Auto Item Recording</div><div id="ww1108607" class="Body"><span></span>If you are using AHB UVM or AXI UVM Verification IP, you need to define a macro named <span class="Code">UVM_DISABLE_AUTO_ITEM_RECORDING</span>. This section describes why this macro needs to be defined, and what are its implications if a user defined driver and sequencer also exist in the same environment.</div><div id="ww1108608" class="Body"><span></span>AXI and AHB protocols are pipelined protocols. In pipelined protocols, driver needs to initiate the next transaction before the previous transaction completes. Thus, the VIP driver indicates <span class="Code">seq_item_port.item_done</span>() much before the transaction is completed on the bus, so that the sequencer can provide next sequence item to the driver. Driver does not wait for a transaction to complete before <span class="Code">calling seq_item_port.item_done(</span>). </div><div id="ww1108595" class="Body"><span></span>For AXI, seq_item_port.item_done() is called as soon as the driver accepts a transaction from the sequencer. For AHB, seq_item_port.item_done() is called when penultimate beat address of the current transaction is accepted by the slave. The VIP explicitly marks end of transaction when the transaction actually completes on the interface, instead of letting UVM do it. Hence, VIP needs to define <span class="Code">UVM_DISABLE_AUTO_ITEM_RECORDING</span> macro.</div><div id="ww1108640" class="Body"><span></span>If the environment contains a user defined driver/sequencer, and the macro UVM_DISABLE_AUTO_ITEM_RECORDING is defined, user needs to make sure that the driver explicitly marks end of transaction when transaction actually completes on the interface. For example, for a non-pipelined protocol, user can call req.end_tr() in the driver code after calling seq_item_port.item_done(),  assuming that seq_item_port.item_done() is called only after the transaction is complete. Alternatively, user can call req.end_tr() in the corresponding sequence, after the sequence unblocks based on seq_item_port.item_done(). </div><div id="ww1108641" class="Body"><span></span>For pipelined protocol, user needs to wait till the transaction is complete on the bus, before calling req.end_tr().</div><div id="ww1108642" class="Body"><span></span>Code snippet of the driver (assuming non-pipelined protocol):</div><div id="ww1108643" class="Code">seq_item_port.item_done();</div><div id="ww1108644" class="Code">req.end_tr();</div><div id="ww1108645" class="Body"><span></span>Code snippet of the sequence (assuming non-pipelined protocol):</div><div id="ww1108646" class="Code">`uvm_do(req);</div><div id="ww1108647" class="Code">req.end_tr();</div><div id="ww1108648" class="Code">&nbsp;</div><div id="ww1108649" class="Body"><span></span>&nbsp;</div><div class="ww_skin_page_overflow"><table class="Note" style="width: 540.75024pt" cellspacing="0" summary=""><tr><td style="padding-bottom: 6pt; padding-left: 6pt; padding-right: 10pt; padding-top: 6pt; vertical-align: top; width: 77.99976pt"><div id="ww1123432" class="Z_Note"><span><img src="Note.gif" alt="*" border="0" width="100" height="27" /></span>&nbsp;</div></td><td style="padding-bottom: 6pt; padding-left: 6pt; padding-right: 10pt; padding-top: 6pt; vertical-align: top; width: 462.75048pt"><div id="ww1123434" class="TableBody"><span></span>VIPs for pipelined and non-pipelined protocols are designed to work correctly when UVM_DISABLE_AUTO_ITEM_RECORDING macro is defined.</div></td></tr></table></div><noscript><div id="noscript_warning">This site works best with JavaScript enabled</div></noscript><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br /></footer><input type="hidden" id="preserve_unknown_file_links" value="false"></input></body></html>