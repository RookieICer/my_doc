<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>Setting up Secure and Non-Secure access mechanism for AXI-ACE Master</title><link rel="Prev" href="06_using_AXI_VIP.10.12.html" title="Previous" /><link rel="Next" href="06_using_AXI_VIP.10.14.html" title="Next" /><link rel="StyleSheet" href="css/06_using_AXI_VIP.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/06_using_AXI_VIP_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../index.html#page/axi_svt_uvm_user_guide/06_using_AXI_VIP.10.13.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');

            // escape the '#' character
            //
            redirect_url += '%23' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script><noscript><div id="noscript_padding"></div></noscript></head><body id="pQ0vXJzhXh6vfUQTI9WN8Cg" class="ww_skin_page_body" onload="Page.OnLoad('../index.html#page/axi_svt_uvm_user_guide/06_using_AXI_VIP.10.13.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><a class="WebWorks_Breadcrumb_Link" href="01_Intro.01.1.html">AXI UVM User Guide</a> : <a class="WebWorks_Breadcrumb_Link" href="06_using_AXI_VIP.10.01.html#1112076"> Using AXI Verification IP</a> : Setting up Secure and Non-Secure access mechanism for AXI-ACE Master </div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a><a class="ww_behavior_email ww_skin ww_skin_email" title="E-Mail" href="#" target="external_window">&nbsp;</a></div></header><div id="ww1112076" class="H2">Setting up Secure and Non-Secure access mechanism for AXI-ACE Master </div><div id="ww1112077" class="Body"><span></span>By default when cacheline is written or read by VIP master agent or backdoor APIs , they are agnostic to any secure/non-secure protection specialization. ACE protocol indicate the Secure/Non-Secure access using AxPROT[1]. </div><div id="ww1112078" class="Body"><span></span>Here is how VIP can be configured to manage this protection mechanism </div><div id="ww1112079" class="L1Num"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>The following port configuration attributes enable this mechanism for corresponding VIP agent</div><div id="ww1112080" class="L1Code">svt_axi_port_configuration::tagged_address_space_attributes_enable = 1;      </div><div id="ww1112081" class="L1Body"><span></span>// This Enables support of independent secure and non-secure address space, including cacheline for snoop response</div><div id="ww1112082" class="L1Num"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>The following this configuration setting the AxProt[1]  bit will be used as ADDRESS - MSB by VIP to write/read the cacheline, so address width must be set accordingly. </div><div id="ww1112083" class="L1Body"><span></span>For example, if you had set  SVT_AXI_MAX_ADDR_WIDTH macro to maximum address width possible across any agent in given system (for example, 44) , then you need to set it '1+'   to accommodate the tagged address bit (MSB appended to address coming from AxPROT[1]).</div><div id="ww1112084" class="L1Body"><span></span>Example:</div><div id="ww1112085" class="L1Code">`define SVT_AXI_MAX_ADDR_WIDTH 45</div><div id="ww1112086" class="L1Num"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>You also need to set the address tag attribute width, which is used to indicate on how many bits of AxPROT will be used (currently there is support for only AxPROT[1] , hence setting it to '1' is good enough)</div><div id="ww1112087" class="L1Body"><span></span>Example</div><div id="ww1112088" class="L1Body" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 4.0pt; margin-top: 4.0pt; text-transform: none; vertical-align: baseline"><span></span><span class="Code">`define SVT_AXI_ADDR_TAG_ATTRIBUTES_WIDTH 1</span></div><div id="ww1112089" class="L1Num"><span class="WebWorks_Number" style="width: 18pt"><span>4.	</span></span>Set the VIP master agent <span class="Code">addr_width  &lt;=  SVT_AXI_MAX_ADDR_WIDTH -</span> <span class="Code">`SVT_AXI_ADDR_TAG_ATTRIBUTES_WIDTH </span></div><div id="ww1112090" class="Body"><span></span>Here is how VIP manages secure and non-secure address ranges :-</div><div id="ww1112091" class="Body"><span></span>Whenever VIP master will see the cacheline store (For example, addr 20000000000), then the address information in cache will be stored based on actual address , appended with MSB value from AxPROT[1] (that address MSB value stored in cache will be!(AxPROT[1]) )</div><div id="ww1112092" class="Body"><span></span>For example, address stored in cache for the case , where AxPROT[1] was ''1' (i.e non secure)  will be 020000000000.</div><div id="ww1112095" class="BodyHead"><span></span>User Backdoor WRITE and READ to Master Cache</div><div id="ww1112096" class="Body"><span></span>These operations should access respective cacheline using thess tagged address (MSB appended to actual cacheline address as 1/0 for secure and non-secure respectively)</div><div id="ww1112097" class="Body"><span></span>Each write backdoor should be followed by <span class="Code">set_prot_type</span> call for that cacheline. VIP also does it under the hood when it writes to cache. </div><div id="ww1112098" class="Body" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 4.0pt; margin-top: 4.0pt; text-transform: none; vertical-align: baseline"><span></span><span class="Code">svt_axi_cache::set_prot_type(addr_t addr, int is_privelged = -1, int is_secure = -1 , int is_instruction = -1)</span></div><div id="ww1112099" class="Body"><span></span>&nbsp;</div><div class="ww_skin_page_overflow"><table class="Note" style="width: 540.75024pt" cellspacing="0" summary=""><tr><td style="padding-bottom: 6pt; padding-left: 6pt; padding-right: 10pt; padding-top: 6pt; vertical-align: top; width: 77.99976pt"><div id="ww1123503" class="Z_Note"><span><img src="Note.gif" alt="*" border="0" width="100" height="27" /></span>&nbsp;</div></td><td style="padding-bottom: 6pt; padding-left: 6pt; padding-right: 10pt; padding-top: 6pt; vertical-align: top; width: 462.75048pt"><div id="ww1123505" class="TableBody"><span></span>VIP supports only AxPROT[1] value currently that is, is_secure argument, hence passing any/no value to other arguments (is_privileged and is_instruction) will not make any difference.</div></td></tr></table></div><noscript><div id="noscript_warning">This site works best with JavaScript enabled</div></noscript><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br /></footer><input type="hidden" id="preserve_unknown_file_links" value="false"></input></body></html>